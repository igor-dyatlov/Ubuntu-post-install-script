#!/bin/bash

dir="$(dirname "$0")"

source $dir/functions/kernel-data/stable/v4.4-stable
source $dir/functions/kernel-data/stable/v4.4-wily-stable
source $dir/functions/kernel-data/stable/v4.4-xenial-stable
source $dir/functions/kernel-data/unstable/v4.4-wily-unstable

# Kernel system upgrade
function kernel-4.4 {
  eval `resize`
  KERNELALL44=$(whiptail \
    --notags \
    --title 'Update system kernel' \
    --menu '\nWhat would you like to do?' \
    --ok-button 'Update' \
    --cancel-button 'Go Back' \
  $LINES $COLUMNS $(( $LINES - 12 )) \
    v4.4-stable 'Update stable (v4.4) kernel (need reboot)' \
    v4.4-wily-stable 'Update stable (v4.4-wily) kernel (need reboot)' \
    v4.4-xenial-stable 'Update stable (v4.4-xenial) kernel (need reboot)' \
    v4.4-wily-unstable 'Update unstable (v4.4-wily) kernel (need reboot)' \
  3>&1 1>&2 2>&3)

exitstatus=$?
  if [ $exitstatus = 0 ]; then
    clear && $KERNELALL44
  else
    clear && main
  fi
}
